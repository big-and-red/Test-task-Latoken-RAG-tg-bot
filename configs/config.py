import os
from dataclasses import dataclass, field


@dataclass
class DatabaseConfig:
    driver: str = os.getenv('POSTGRES_DRIVER', "postgresql+psycopg2")
    user: str = os.getenv('POSTGRES_USER', 'latoken')
    host: str = os.getenv('POSTGRES_HOST', 'localhost')
    port: str = os.getenv('POSTGRES_PORT', '5432')
    database: str = os.getenv('POSTGRES_DB', 'db_latoken')

    @property
    def url(self) -> str:
        return f"{self.driver}://{self.user}@{self.host}:{self.port}/{self.database}"


@dataclass
class BotMessages:
    START_MESSAGE: str = """
üëã –ü—Ä–∏–≤–µ—Ç! –Ø —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ LATOKEN!

üõ† –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
‚Ä¢ /help - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
‚Ä¢ /qviz - —É–º–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
‚Ä¢ /test - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞–Ω–∏–π
‚Ä¢ /choose_rag - –≤—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ /add_rag_source - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

‚ö°Ô∏è –¢–µ–∫—É—â–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:
‚Ä¢ 01_hackathon.zip - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–∞–∫–∞—Ç–æ–Ω–µ
‚Ä¢ 01_Culture_Deck.zip - –∫—É–ª—å—Ç—É—Ä–∞ LATOKEN
‚Ä¢ 01_history_eng.zip - —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è)
‚Ä¢ 01_latoken.zip - –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
‚Ä¢ 01_Tsagoiko_Leontiy_CV.zip - —Ä–µ–∑—é–º–µ –∞–≤—Ç–æ—Ä–∞

üìë –û –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö:
Culture Deck –±—ã–ª —Å–æ–±—Ä–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞:
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å Coda.io —á–µ—Ä–µ–∑ Playwright (headless Chromium)
‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —Ç–∞–∫ –∏ –≤–∏–¥–µ–æ-—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤
‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚Ä¢ –û—á–∏—Å—Ç–∫–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è RAG –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–∑ PDF, TXT, DOCX, CSV –∏ JSON —Ñ–∞–π–ª–æ–≤
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ZIP-–∞—Ä—Ö–∏–≤–æ–≤ —Å –ª—é–±–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é –ø–∞–ø–æ–∫ (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥)

‚è≥ –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 1 –º–∏–Ω—É—Ç—ã. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ /qviz —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞.

‚ù§Ô∏è P.S. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞ 30 —á–∞—Å–æ–≤ –±–µ–∑ —Å–Ω–∞, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —á–∞—Å—ã (—à–≤–µ–π—Ü–∞—Ä—Å–∫–∏–µ)!
"""

    HELP_MESSAGE: str = """
üìö –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞

1Ô∏è‚É£ –í—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø—Ä–æ—Å:
–®–∞–≥ 1: /choose_rag

–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–∑ —Å–ø–∏—Å–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä "01_hackathon.zip"
–®–∞–≥ 2: /qviz

–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /qviz –∏ –∑–∞–¥–∞–π—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å
–ù–∞–ø—Ä–∏–º–µ—Ä: /qviz —Ä–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —Ö–∞–∫–∞—Ç–æ–Ω
‚≠êÔ∏è –í–∞–∂–Ω–æ: —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ —á–µ—Ä–µ–∑ /choose_rag, –∑–∞—Ç–µ–º –∑–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ /qviz

2Ô∏è‚É£ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö:
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /add_rag_source
‚Ä¢ –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ ZIP-–∞—Ä—Ö–∏–≤–∞
‚Ä¢ –í–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–∞–ø–∫–∏ –ª—é–±–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, TXT, DOCS, EXCEL, JSON
‚Ä¢ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ–π–¥–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –∞—Ä—Ö–∏–≤–µ

3Ô∏è‚É£ –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

üíé –î–ª—è 01_latoken.zip:
‚Ä¢ –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ LATOKEN

üéØ –î–ª—è 01_hackathon.zip:
‚Ä¢ –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —Ö–∞–∫–∞—Ç–æ–Ω LATOKEN
‚Ä¢ –†–∞—Å—Å–∫–∞–∂–∏ —Ä–µ—Ü–µ–ø—Ç —Å–∞—Ö–∞—Ä–Ω–æ–≥–æ –ø–µ—á–µ–Ω—å—è

üè¢ –î–ª—è 01_Culture_Deck.zip:
‚Ä¢ –ü–æ—á–µ–º—É LATOKEN –ø–æ–º–æ–≥–∞–µ—Ç –ª—é–¥—è–º –∏–∑—É—á–∞—Ç—å –∏ –ø–æ–∫—É–ø–∞—Ç—å –∞–∫—Ç–∏–≤—ã?
‚Ä¢ –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Sugar Cookie —Ç–µ—Å—Ç?
‚Ä¢ –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Wartime CEO?
‚Ä¢ –í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —Å—Ç—Ä–µ—Å—Å –ø–æ–ª–µ–∑–µ–Ω –∏ –≤ –∫–∞–∫–∏—Ö –≤—Ä–µ–¥–µ–Ω?

üë®‚Äçüíª –î–ª—è —Ä–µ–∑—é–º–µ (01_Tsagoiko_Leontiy_CV.zip):
‚Ä¢ –û–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–ø—ã—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI –∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö LLM –º–æ–¥–µ–ª–µ–π. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å RAG, –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π.

3Ô∏è‚É£ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã:
üîç –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è RAG-—Å–∏—Å—Ç–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –≤–º–µ—Å—Ç–æ OpenAI Assistant:

–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ RAG:
‚Ä¢ –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ PostgreSQL (pg_vector)
‚Ä¢ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º:
–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ (70%)
TF-IDF –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (30%)
‚Ä¢ –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –æ—Ç–±–æ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤:
–ù–∞—á–∞–ª—å–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ —Ç—Ä–µ–±—É–µ–º–æ–π (limit * 2)
MMR –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ

üí° –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –≤—ã–±—Ä–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏:
‚Ä¢ –ù–∞–≤—ã–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
‚Ä¢ –ü–æ–Ω–∏–º–∞–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
‚Ä¢ –£–º–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚Ä¢ –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—Ç—å ‚Ä¢ —Å –±–æ–ª—å—à–∏–º–∏ –Ω–∞–±–æ—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è

‚ö°Ô∏è –ü—É—Ç—å –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:
‚Ä¢ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
‚Ä¢ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ pg_vector (2x buffer)
‚Ä¢ –ì–∏–±—Ä–∏–¥–Ω–æ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–µ–º–∞–Ω—Ç–∏–∫–∞ + TF-IDF)
‚Ä¢ MMR —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
‚Ä¢ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ LLM
‚Ä¢ –í—ã–≤–æ–¥ –æ—Ç–≤–µ—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

üéØ –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!
"""


@dataclass
class Config:
    TELEGRAM_TOKEN: str = os.getenv('TELEGRAM_TOKEN', '')
    OPENAI_API_KEY: str = os.getenv('OPENAI_API_KEY',
                                    '')

    RAG_EMBED_MODELS_CACHE: str = os.getenv('RAG_EMBED_MODELS_CACHE',
                                            '')

    db: DatabaseConfig = field(default_factory=DatabaseConfig)
    messages: BotMessages = field(default_factory=BotMessages)


config = Config()
